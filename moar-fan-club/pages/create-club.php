<div style='text-align:center;'>


    <style>
    
    .time_circles {
            position: relative;
            width: 100%;
            height: 100%;
        }
        /* This is all the elements used to house all text used in time circles  **/
        .time_circles>div {
            position: absolute;
            text-align: center;
        }
        /* Titles (Days, Hours, etc) */
        .time_circles>div>h4 {
            margin: 0px;
            padding: 0px;
            text-align: center;
            text-transform: uppercase;
            font-family: 'Century Gothic', Arial;
        }
        /* Time numbers, ie: 12 */
        .time_circles>div>span {
            display: block;
            width: 100%;
            text-align: center;
            font-family: 'Century Gothic', Arial;
            font-size: 300%;
            margin-top: 0.4em;
            font-weight: bold;
        }
        select {
            display: initial !important;
            max-width: initial !important;
        }
        .form-group {
            margin-bottom: -17px;
        }

        label.error {
            color: #ff2121 !important;
            font-size: 13px !important;
            padding-top: 0px
         }
        .jugSec {
            display: initial;
        }
        #chars {
            text-align: right;
        }

        
    .competetion-list_page_competetion-announcement   td {
    font-family: "Lucida Grande";
    font-size: 12px;
    background-color: #fcfcfc;
    box-shadow: -1px 14px 288px 160px rgb(196 196 196 / 0%);
    -webkit-box-shadow: -1px 14px 288px 160px rgb(196 196 196 / 5%);
    -moz-box-shadow: -1px 14px 288px 160px rgba(196,196,196,0.27);
}
.competetion-list_page_competetion-announcement td,   .competetion-list_page_competetion-announcement th {
    padding: 15px 15px;
    display: table-cell;
    text-align: left;
    vertical-align: middle;
    border-radius: 2px;
    background-color:#fff;
}
.competetion-list_page_competetion-announcement a {
    color: #000000;
}
.ui-datepicker-calendar a, .ui-datepicker-calendar span{
    font-size:18px;

}
.ui-datepicker-prev span {
    color: black !important;
}
.ui-datepicker-header {
    background-color: #cececeed;
    display: flex;
    color: white;
    padding: 4px;
}
 td {
 
    box-shadow: -1px 14px 288px 160px rgb(196 196 196 / 0%);
    -webkit-box-shadow: -1px 14px 288px 160px rgb(196 196 196 / 5%);
    -moz-box-shadow: -1px 14px 288px 160px rgba(196,196,196,0.27);
}
.ui-datepicker-title {
    color: #26a69a;
    padding-top: 18px;
    padding-left: 12px;
    font-weight: bold;
}
.ui-datepicker-next {
    margin-left:auto;
    color:black;
    padding-top: 18px;
}
.ui-state-disabled span {
    color: #adadad;
}
.form-group span{
    color:red;
}
select:focus, input:focus, input[type=file]:focus, input[type=date]:focus, textarea:focus {
    border-color: lightgrey;
    box-shadow: initial !important;
}
.select2-container--default.select2-container--focus .select2-selection--multiple {
    border: none;
    border-bottom: 1px solid #b6b6b6;
}
span.ui-state-default {
    color: #9a9a9a !important;
}
    
    .select-area-grid {
        display: flex;
        padding: 40px 40px 40px 40px;
    }

    .select-area-grid select {
        height: 33px;

    }

    .select-area-grid span {

        padding: 8px 30px 0px 30px;

    }

    .card-header {
        z-index: 3 !important;
        background: linear-gradient(60deg
, #d6363800, #26a69a00);
        color: #191919;
        border-radius: 3px;
        margin-top: -20px;
        padding: 15px;
    }

    body {
        background-color: #eee !important;
        color: #3C4858 !important;
        font-weight: 300;
    }


    .card-moar {
        background-color: #000000;
        padding: 0px 26px 26px 26px;
        margin-top: 30px;
    }

    .area-wise-com {
        outline: 0;

        position: relative;
        height: 140px;
        margin-top: 23px;
    }

    .area-wise-com label {
        text-align: left;
        margin-right: auto;
        display: block;
        padding-top: 13px;
        color: #6f6d6d;
        font-weight: inherit;
        font-size: 20px;
    }

    .wp-core-ui select {
        border: initial;
        border-bottom: 1px solid #4f4f4f7a;
        border-radius: initial;
    }

    .wp-core-ui select :focus {
        border: none !important;
        outline: none !important;
    }

    .submitTimingForm {
        width: 14% !important;
        background-color: #000000fc !important;
    }

    .m-input {
        width: 20%;
    }

    .jugSec {
        display: flex;
    }

    .added-input select {
        width: 75% !important;
    }

    #newRow,
    .added-input {
        display: flex;
    }

    .jugSec button {
        padding: initial;
        height: 25px;
        width: 30px;
        line-height: 25px;
        margin-top: 16px;
    }

    .multiselect_field + span.select2 {
        text-align: left;
    }

    .multiselect_field + span.select2 textarea::placeholder {
        color: #020202 !important;
    }

    .labelFor_multiselect {
        float: left !important;
        color: #020202 !important;
        font-size: 15px;
    }
    p.judges_selection_error {
        color: #ff2121 !important;
        font-size: 18px;
        padding-top: 0px;
        text-align: left;
    }
    </style>


    <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.10.2/jquery.min.js"></script>
  

    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.1/dist/css/bootstrap.min.css">
    <link rel="stylesheet" type="text/css"
        href="https://fonts.googleapis.com/cssfamily=Roboto:300,400,500,700|Roboto+Slab:400,700|Material+Icons" />
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/latest/css/font-awesome.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/css/materialize.min.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/js/materialize.min.js"></script>
    <script src="https://unpkg.com/sweetalert/dist/sweetalert.min.js"></script> 
    <script src="https://cdn.jsdelivr.net/jquery.validation/1.15.1/jquery.validate.min.js"></script>

    <link href="https://cdn.jsdelivr.net/npm/select2@4.1.0-rc.0/dist/css/select2.min.css" rel="stylesheet" />
    <script src="https://cdn.jsdelivr.net/npm/select2@4.1.0-rc.0/dist/js/select2.min.js"></script>

    <style>
        .time_circles {
            position: relative;
            width: 100%;
            height: 100%;
        }
        /* This is all the elements used to house all text used in time circles  **/
        .time_circles>div {
            position: absolute;
            text-align: center;
        }
        /* Titles (Days, Hours, etc) */
        .time_circles>div>h4 {
            margin: 0px;
            padding: 0px;
            text-align: center;
            text-transform: uppercase;
            font-family: 'Century Gothic', Arial;
        }
        /* Time numbers, ie: 12 */
        .time_circles>div>span {
            display: block;
            width: 100%;
            text-align: center;
            font-family: 'Century Gothic', Arial;
            font-size: 300%;
            margin-top: 0.4em;
            font-weight: bold;
        }
        select {
            display: initial !important;
            max-width: initial !important;
        }
        .form-group {
            margin-bottom: -17px;
        }

        label.error {
            color: #ff2121 !important;
            font-size: 18px;
            padding-top: 0px;
        }
        .jugSec {
            display: initial;
        }
        #chars {
            text-align: right;
        }

        
    .competetion-list_page_competetion-announcement   td {
    font-family: "Lucida Grande";
    font-size: 12px;
    background-color: #fcfcfc;
    box-shadow: -1px 14px 288px 160px rgb(196 196 196 / 0%);
    -webkit-box-shadow: -1px 14px 288px 160px rgb(196 196 196 / 5%);
    -moz-box-shadow: -1px 14px 288px 160px rgba(196,196,196,0.27);
}
.competetion-list_page_competetion-announcement td,   .competetion-list_page_competetion-announcement th {
    padding: 15px 15px;
    display: table-cell;
    text-align: left;
    vertical-align: middle;
    border-radius: 2px;
    background-color:#fff;
}
.competetion-list_page_competetion-announcement a {
    color: #000000;
}
.ui-datepicker-calendar a, .ui-datepicker-calendar span{
    font-size:18px;

}
.ui-datepicker-header {
    background-color: #cececeed;
    display: flex;
    color: white;
    padding: 16px;
}
.ui-state-disabled span {
    color: #adadad;
}
.form-group span{
    color:red;
}
.select2-container--default.select2-container--focus .select2-selection--multiple {
    border: none;
    border-bottom: 1px solid #b6b6b6;
}
.card-title {
    margin-bottom: .5rem;
    position: relative;
    top: =;
    font-weight: bold;
    text-align: left;
    color: #fff;
    font-size: 42px;
    margin-top: -25rem;
    padding-bottom: 140px;
}
#your-profile label+a, label {
    color: white !important;
    float: right;
    font-size: 24px !important;
    font-family: ptsans;
    position: relative;
    top: 16px;
}
.card-body {
    max-width: 86%;
}
#imageBanner {
    background-color: #333333;
    padding: 0px 50px;
}
.imageproperty {
    cursor: pointer;
    float: left;
    padding: 11px 26px;
    font-weight: 500;
    color: #aaaaaa;
}
.card-moar input {
    border: 1px solid #686868 !important;
    padding: 5px !important;
    border-radius: 3px !important;
}
.select2-container--default .select2-selection--multiple {
    background-color: #42424200;
    border: 2px solid #4e4e4e !important;
    padding: 15px;
    border-radius: 2px;}

    .card-moar button {
    margin-top: 0rem!important;
    margin: 61px 365px 18px auto !important;
    display: block !important;
    float: initial !important;
    background-color: #333333 !important;
    width: initial;
    padding: 0px 42px !important;
}
.overlayImage {
    position: relative;
    top: -17rem;
    height: 260px;
}
.ui-state-disabled span {
    color: #adadad;
    padding: 15px 15px;
    display: table-cell;
    text-align: left;
    vertical-align: middle;
    border-radius: 2px;
}
.ui-datepicker-calendar a, .ui-datepicker-calendar span {
    font-size: 18px;
    text-align: center;
    color: black;
    margin: auto;
    display: block;
}
.ui-datepicker-calendar th {
    background-color: #a8a9a5;
}
button, input, optgroup, select, textarea {
    color: white !important;
}
.banner-img{
    width: 1436px;
    height: 253px;
    object-fit: cover;
}
    </style>

    <?php
        $args1 = array(
            'role' => 'judge',
            'orderby' => 'user_nicename',
            'order' => 'ASC'
        );
        $judge = get_users($args1);
    ?>
    <?php wp_enqueue_media(); ?>

                    <div class="card-moar">
                        <div class="card-header card-header-primary">
                            <img class="banner-img" src="<?php echo get_site_url(); ?>/wp-content/uploads/2021/08/pexels-daniel-dinu-849-scaled.jpg" />
                            <img class="w-100 overlayImage" src="<?php echo get_site_url(); ?>/wp-content/uploads/2021/08/bruno-emmanuelle-Gi6-m_t_W-E-unsplash.png"/>
                            <h4 class="card-title">Create Club</h4>
                        </div>
                        <div class="card-body">
                            <form action="" method="post" id="addform" enctype="multipart/form-data">
                                  <!-- row start -->
                                        <div class="row">
                                        <div class="col-md-2"><Label>Name</label></div>
                                            <div class="col-md-10">
                                                <div class="form-group bmd-form-group">
                                                    <input type="text"
                                                     name="competetionName"
                                                        placeholder="Name" id="companyname"
                                                        class="form-control" required="" aria-required="true"
                                                        maxlength="50"
                                                        />
                                                </div>
                                            </div>
                                        </div>
                                        <!-- row end -->
                                        <div class="row" style=" padding-top: 17px;">
                                        <div class="col-md-2"><Label>Start Date</label></div>
                                            <div class="col-md-4">
                                                <div class="form-group bmd-form-group">
                                                    <label class="bmd-label-floating"></label>
                                                     <input required="" type="text" id="pickdateforContent"
                                                        name="pickdateforContent"
                                                        onchange="cont_end(this); disabledchanged(this);" 
                                                        value=""
                                                        autocomplete="off"
                                                        placeholder="Enter Date"
                                                        readonly
                                                      /><span id="cont_error"></span>

                                                </div>
                                            </div>
                                            <div class="col-md-2"><Label>End Date</label></div>
                                            <div class="col-md-4">
                                                <div class="form-group bmd-form-group">
                                                    <label class="bmd-label-floating"></label>
                                                    
                                                    <input required="" type="text" id="pickdate"
                                                     name="pickdate"
                                                     onchange="comp_end(this)" disabled
                                                     value=""
                                                     placeholder="Enter Date"
                                                     autocomplete="off"
                                                     readonly
                                                     /><span id="comp_error"></span>
                                                </div>
                                            </div>
                                        </div>
                                        <!-- banner image -->
                                        <div class="row">
                                            <div class="col-md-2"><Label>Upload Banner</label></div>
                                                <div class="col-md-10">
                                                <div class="file-field input-field">
                                                    <div class="btn" id="imageBanner">
                                                        <span>Upload</span>
                                                        <!-- 														<input type="file"   multiple> -->
                                                    </div>
                                                    <span class="imageproperty"> image ratio..., Upload in JPG, PNG size less than 2mb </span>
                                                    <img src="" type="hidden" id="frontImage" class="compImg"
                                                        style="   width: 50%; margin-top: -46px; " />
                                                </div>
                                                <div class="file-path-wrapper">
                                                    <input required="" class="file-path validate"
                                                     name="bannerImage"
                                                        id="imageUrl" type="hidden"
                                                        required=""
                                                        placeholder="Upload one or more files">
                                                </div>
                                            </div>
                                        </div>
                                          <!-- textarea -->
                                    <div class="area-wise-com">
                                        <div class="row" id="inputFormRow">
                                           <div class="col-md-2"><Label>Description</label></div>
                                              <div class="col-md-10 jugSec competition_description">
                                               <textarea required="" width="400px" id="textareaChars" 
                                                 style="height:165px"
                                                    name="description" 
                                                     placeholder="Enter Description"
                                                    maxlength="300"> </textarea>
                                              </div>
                                            <span class="text-right" id="chars">300</span>
                                        </div>
                                    </div>
                                    <input required="" name="createdBy" type="hidden"
                                        value="<?php echo get_current_user_id(); ?>" />
                                    <button type="submit" name="submitTimingForm"
                                        class="mt-5 ml-3 submitTimingForm btn btn-primary pull-right"
                                        style="margin-left: 22px;">
                                        Save
                                    </button>
                                    <!-- <a href="#" class="mt-5 ml-3 submitTimingForm btn btn-primary pull-right" name="submitTimingForm" style="margin-left: 22px;"> <?= __( 'translate text', 'textdomain' ); ?> </a> -->
                            </form>
                        </div>
                    </div>
                
    <script>
    // 	judge selection 
    var inc = 1;
    if (inc >= 10) {
        jQuery("#inputFormRow").css("diplay", "none");
    }
    var i = 2
    jQuery("#addRow").click(function() {
        var html = '';
        html += `<span id="inputFormRow" ${inc}>`;
        html += '<div class=" mb-3 added-input">';
        html += `<select type="text" name="title${i++}" class="m-input" placeholder="Select Judge" autocomplete="off"  required="">
		               <option value="" disabled="" selected="">Choose judge</option>
		     <?php foreach ($judge as $user){ ?>
                      <option value=<?php echo json_encode($user->id); ?>>
						  <?php  echo $user->display_name; ?></option>
             <?php } ?> `;
        html += '</select>';
        html += '<div class="input-group-append">';
        html += '<button id="removeRow" type="button" class="btn btn-danger">X</button>';
        html += '</div>';
        html += '</span>';

        jQuery('#newRow').append(html);
    });

    jQuery(document).on('click', '#removeRow', function() {
        jQuery(this).closest('#inputFormRow').remove();
    });


    // 	image upload js
    jQuery(function() {
        jQuery("#imageBanner").on("click", function() {
            var image = wp.media({
                title: "upload competiton image",
                multiple: false
            }).open().on("select", function() {
                var uploadImage = image.state().get("selection");
                console.log(uploadImage.toJSON()[0].url)
                document.getElementById("imageUrl").value = uploadImage.toJSON()[0].url
                jQuery("#frontImage").attr("src", uploadImage.toJSON()[0].url)
            })
        })
    })
    </script>

    <?php if(isset($_POST["submitTimingForm"])){
        global $wpdb;
                                $competetionName=$_POST["competetionName"];
                                $GetDate=$_POST["pickdate"];
                                $GetTime=$_POST["pickTime"];
	                            $pickdateforContent=$_POST["pickdateforContent"];
                                $pickTimeforContent=$_POST["pickTimeforContent"];
                                $country=$_POST["country"];
                                $description=htmlspecialchars($_POST['description']);
                                $bannerImage=$_POST["bannerImage"];
	                            $createdBy=$_POST["createdBy"];
	                            $term = $_POST["competetionName"];

                            $wpdb->insert('wp_create_club', array(
                                'Name' => "$competetionName",
                                'Stating_time' => "$GetDate",
								'End_time' => "$pickdateforContent",
                                'Time' => "$GetTime",
                                'Date' => "$GetDate",
								'Banner_img'=>"$bannerImage",
                                'Description' => "$description",
                                )); 
                            echo $sql;
							wp_insert_term( $term, "All_Competition", array(
								'description' => "$description",
								'parent'      => 0,
								'slug'        => '',
							) );
	                      $getSiteUrl=get_site_url();
                          echo $wpdb->last_query;
	                        wp_redirect("$getSiteUrl/wp-admin/admin.php?page=bms-settings");
                        }
      ?>
    <?php $getCurentDate= date('Y-m-d'); ?>
    <script>
    var maxLength = 300;
    jQuery('#textareaChars').keyup(function() {
        var length = $(this).val().length;
        var length = maxLength - length;
        $('#chars').text(length);
    });
   
var validator = jQuery("#addform").validate({
         rules: {
            companyname:{
             required: true,
           },
           imageUrl: {
             required: true,
           },
            pickdateforContent: {
             required: true,
           },
           pickdate: {
             required: true,
           },
            judges: {
             required: true,
           },
           textareaChars: {
             required: true,
           }
         },
         messages: {
           password: {
             required: "this field is required",
             
           }
         },
         submitHandler: function(form) {
                        form.submit();
                      }
       });
       var maxLength = 300;
jQuery('#textareaChars').keyup(function() {
  var length = $(this).val().length;
  var length = maxLength-length;
  $('#chars').text(length);
});
    // calender input field code start
    var competitionDateFocus = document.getElementById("pickdate");
    var contentPickDateFocus = document.getElementById("pickdateforContent");
    var competitionDate = document.getElementById("pickdate").value;
    var contentPickDate = document.getElementById("pickdateforContent").value;
    

    function disabledchanged(changedDiabled){
        if(contentPickDate = document.getElementById("pickdateforContent").value !="")
        { jQuery("#pickdate").prop('disabled', false); }
    }
    function cont_end(input){
        if(input.value == document.getElementById("pickdate").value )
           {  document.getElementById("cont_error").innerHTML="<span>should not equal </span>"
              input.value =""
           }else if(input.value != document.getElementById("pickdate").value )
           {
            document.getElementById("cont_error").innerHTML=""
           }
    }
    function comp_end(compInput){
        if(compInput.value == document.getElementById("pickdateforContent").value )
           { document.getElementById("comp_error").innerHTML="<span>should not equal </span>"
            compInput.value =""
           }else if(compInput.value != document.getElementById("pickdateforContent").value )
           {
            document.getElementById("comp_error").innerHTML=""
           }
    }
</script>
<!-- <script src="http://code.jquery.com/jquery-2.2.4.min.js" integrity="sha256-BbhdlvQf/xTY9gja0Dq3HiwQF8LaCRTXxZKRutelT44=" crossorigin="anonymous"></script> -->
<script src="https://code.jquery.com/ui/1.12.1/jquery-ui.min.js" integrity="sha256-VazP97ZCwtekAsvgPBSUwPFKdrwD3unUfSGVYrahUqU=" crossorigin="anonymous"></script>

<script>
jQuery(document).ready(function () {
    
function abc(value){
    return value;
}
var default_end ="";
var getcompDate ="";
    jQuery("#pickdateforContent").datepicker({
        showAnim: 'drop',
        numberOfMonth: 1,
        minDate: new Date(),
        dateFormat: 'yy/mm/dd',
        onClose: function (selectedDate) {
            var tempStartDate = new Date(selectedDate);
            default_end = new Date(tempStartDate.getFullYear(), tempStartDate.getMonth(), tempStartDate.getDate()+1);
            jQuery("#pickdate").datepicker("option", "minDate", default_end);
        }
    });
    jQuery("#pickdate").datepicker({
        showAnim: 'drop',
        numberOfMonth: 1,        
        dateFormat: 'yy/mm/dd',
        onClose: function (selectedDate) {
            var compdate = new Date(selectedDate);
            getcompDate = new Date(compdate.getFullYear(), compdate.getMonth(), compdate.getDate()-1);
            jQuery("#pickdateforContent").datepicker("option", "maxDate", getcompDate);
        }
    });
    jQuery("body").on("click", "#addform", function(){
        var target = jQuery('.judges_selection .multiselect-comp').select2('data');
        var target_value = target.length;
        if(typeof(target_value) != "undefined" && target_value !== null && target_value >= 1) {
            if(target_value%2 == 0){
            console.log("Number of judges can not be even, please try again.");
            jQuery(".col-6.judges_selection .judges_selection_error").text("Number of judges can not be even, please try again.");
            jQuery(".submitTimingForm").prop('disabled', true);
            } else {
                jQuery(".submitTimingForm").prop('disabled', false);
                jQuery(".col-6.judges_selection .judges_selection_error").text("");
            }
        } 
    });
});

    </script>